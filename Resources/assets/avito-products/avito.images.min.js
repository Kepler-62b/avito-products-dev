function init(){let $addImageButton=document.getElementById("photo_addCollection");let $blockCollectionPhoto=document.getElementById("photo_collection");if($addImageButton){let $delItemPhoto=$blockCollectionPhoto.querySelectorAll(".del-item-photo");$delItemPhoto.forEach(function(item){item.addEventListener("click",function(){let $counter=$blockCollectionPhoto.getElementsByClassName("item-collection-photo").length;if($counter>0){item.closest(".item-collection-photo").remove()}})});let uploadedFile=$blockCollectionPhoto.querySelectorAll('input[type="file"]');uploadedFile.forEach(function(item){item.addEventListener("change",function(e){let newFile=item.files[0];let reader=new FileReader;let image=item.closest(".image-input");reader.onloadend=function(){image.style.setProperty("background-image","url("+reader.result+")","important")};if(newFile){reader.readAsDataURL(newFile)}else{image.style.setProperty("background-image","url(/img/blank.svg)","important")}})});$addImageButton.addEventListener("click",function(){let $addImageButton=this;let newPrototype=document.getElementById($addImageButton.dataset.prototype).dataset.prototype;let index=$addImageButton.dataset.index*1;if(index===6){return}newPrototype=newPrototype.replace(/__images__/g,index);let div=document.createElement("div");div.classList.add("item-collection-photo");div.innerHTML=newPrototype;$blockCollectionPhoto.append(div);div.querySelector(".del-item-photo").addEventListener("click",function(){let $counter=$blockCollectionPhoto.getElementsByClassName("item-collection-photo").length;this.closest(".item-collection-photo").remove();let index=$addImageButton.dataset.index*1;$addImageButton.dataset.index=(index-1).toString()});$addImageButton.dataset.index=(index+1).toString();let inputElement=div.querySelector('input[type="file"]');inputElement.addEventListener("change",function(e){let file=inputElement.files[0];let reader=new FileReader;let image=div.querySelector(".image-input");reader.onloadend=function(){image.style.setProperty("background-image","url("+reader.result+")","important")};if(file){reader.readAsDataURL(file)}else{image.style.setProperty("background-image","url(/img/blank.svg)","important")}})})}}init();