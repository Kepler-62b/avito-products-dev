function init(){let $addImageButton=document.getElementById("photo_addCollection");let $blockCollectionPhoto=document.getElementById("photo_collection");if($addImageButton){let $delItemPhoto=$blockCollectionPhoto.querySelectorAll(".del-item-photo");$delItemPhoto.forEach(function(item){item.addEventListener("click",function(){let $counter=$blockCollectionPhoto.getElementsByClassName("item-collection-photo").length;if($counter>0){item.closest(".item-collection-photo").remove()}})});let $changeRootPhoto=$blockCollectionPhoto.querySelectorAll(".change-root");$changeRootPhoto.forEach(function(item){if($changeRootPhoto.length===1&&item.checked===false){item.checked=true}item.addEventListener("change",function(){let photo_collection=document.getElementById("photo_collection");photo_collection.querySelectorAll(".change-root").forEach(function(rootCheck){rootCheck.checked=false});this.checked=true})});$addImageButton.addEventListener("click",function(){let $addImageButton=this;let newForm=document.getElementById($addImageButton.dataset.prototype).dataset.prototype;let index=$addImageButton.dataset.index*1;if(index===6){return}newForm=newForm.replace(/__photos__/g,index);let div=document.createElement("div");div.classList.add("item-collection-photo");div.innerHTML=newForm;$blockCollectionPhoto.append(div);div.querySelector(".del-item-photo").addEventListener("click",function(){let $counter=$blockCollectionPhoto.getElementsByClassName("item-collection-photo").length;console.log($counter);this.closest(".item-collection-photo").remove();let index=$addImageButton.dataset.index*1;$addImageButton.dataset.index=(index-1).toString()});div.querySelector(".change-root").addEventListener("change",function(selector){let photo_collection=document.getElementById("photo_collection");photo_collection.querySelectorAll(".change-root").forEach(function(rootChack,i,arr){rootChack.checked=false});this.checked=true});$addImageButton.dataset.index=(index+1).toString();let inputElement=div.querySelector('input[type="file"]');inputElement.addEventListener("change",function(e){var file=inputElement.files[0];var reader=new FileReader;let image=div.querySelector(".image-input");reader.onloadend=function(){image.style.setProperty("background-image","url("+reader.result+")","important")};if(file){reader.readAsDataURL(file)}else{image.style.setProperty("background-image","url(/img/blank.svg)","important")}})})}}init();